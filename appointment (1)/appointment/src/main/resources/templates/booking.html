<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book Appointment</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">
<h2>Book Appointment</h2>

<div th:if="${error}" class="alert alert-danger" role="alert" th:text="${error}"></div>

<form th:action="@{/appointments/book}" th:object="${appointment}" method="post" class="border p-4 rounded bg-light">
    <div class="mb-3">
        <label class="form-label">Doctor</label>
        <select th:field="*{doctor.id}" class="form-select" required>
            <option value="">Select a doctor</option>
            <option th:each="doctor : ${doctors}"
                    th:value="${doctor.id}"
                    th:text="${doctor.name + ' (' + doctor.specialization + ')'}"></option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Patient</label>
        <select th:field="*{patient.id}" class="form-select" required>
            <option value="">Select a patient</option>
            <option th:each="patient : ${patients}"
                    th:value="${patient.id}"
                    th:text="${patient.name}"></option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Date and Time</label>
        <input type="datetime-local" th:field="*{dateTime}" class="form-control" required>
    </div>

    <button type="submit" class="btn btn-primary">Book Now</button>
    <a th:href="@{/appointments}" class="btn btn-secondary ms-2">View Appointments</a>
    <a th:href="@{/doctors}" class="btn btn-outline-info me-2"> Doctors</a>
    <a th:href="@{/patients}" class="btn btn-outline-info"> Patients</a>
</form>
</body>
</html>